
    /**
     * List all {{ entity }} entities.
     *
     */
    public function listAction()
    {


        /**
         * @var GridBuilder $gridBuilder
         */
        $gridBuilder = $this->get('grid.builder');
        {% set format = "             %-" ~ maxColumnNameSize ~ "s => %s" %}

        $columns = [
        {% for field, metadata in fields %} {{format|format("'" ~ field ~ "'", "['title' => '" ~metadata.label|capitalize ~"',],") }}
        {% endfor %}
        ];



        $gridBuilder
            ->setGridId('user')
            ->setExports(['CSV', 'Excel', 'XML'])
            ->addCreateControll('{{ route_prefix }}_new')
            ->setRouteUrl($this->generateUrl('{{ route_prefix }}_list'))
            ->setSource('{{ bundle }}:{{ entity }}', $columns)
            ->setRowActions([
                ['Detail', '{{ route_prefix }}_show', false, '_self', ['icon'=>'icon-eye-open']],
                ['Edit',   '{{ route_prefix }}_edit', false, '_self', ['icon'=>'icon-edit']],
            ]);

            $massActionDelete = new DeleteMassAction(true);
            $massActionDelete->setParameters(['icon'=>'icon-trash']);

            $gridBuilder->setMassActions([
                $massActionDelete
            ]);

        return $gridBuilder->getGridResponse('{{ bundle }}:{{ entity|replace({'\\': '/'}) }}:Crud/list.html.twig');
    }

