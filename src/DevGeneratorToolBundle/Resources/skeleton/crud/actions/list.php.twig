
    /**
     * List all {{ entity }} entities.
     *
     */
    public function listAction()
    {
        /**
         * @var GridBuilder $gridBuilder
         */
        $gridBuilder = $this->get('grid.builder');
        {% set format = "             %-" ~ maxColumnNameSize ~ "s => %s" %}

        $columns = [
        {% for field, metadata in fields %}
{% if field == 'id' %}
{% set d= "" %}
{% else %}
{% set d= "'translation_domain' => 'entity_" ~ entity ~ "'" %}
{% endif %}
{{ format|format("'" ~ field ~ "'", "[" ~ d ~ "],") }}
        {% endfor %}
        ];

        $gridBuilder
            ->setGridId('{{ entity }}')
            ->setExports(['CSV', 'Excel', 'XML'])
            ->addCreateControll('{{ route_prefix }}.new')
            ->setRouteUrl($this->generateUrl('{{ route_prefix }}.list'))
            ->setSource('{{ bundle }}:{{ entity }}', $columns)
            ->setRowActions([
                [null, '{{ route_prefix }}.show', false, '_self', ['icon'=>'icon-eye-open', 'title'=>'Detail']],
                [null, '{{ route_prefix }}.edit', false, '_self', ['icon'=>'icon-edit', 'title'=>'Edit']],
            ]);

            $massActionDelete = new DeleteMassAction(true);
            $massActionDelete->setParameters(['icon'=>'icon-trash']);

            $gridBuilder->setMassActions([
                $massActionDelete
            ]);

        return $gridBuilder->getGridResponse('{{ namespace|replace({'\\': ''}) }}:{{ entity|replace({'\\': '/'}) }}:Crud/list.html.twig');
    }

