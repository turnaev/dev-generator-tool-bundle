<?php

namespace App\CoreBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

//use Symfony\Component\Form;

abstract class {{ form_class }} extends AbstractType
{
    /**
     * @param FormBuilderInterface $builder
     * @param array                $options
     */
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        /* @var \{{ core_bundle_ns }}\Entity\{{ entity }} $entity */
        // $entity = $builder->getData();

        $builder{{ "\n" }}{%- for field in fields %}
{% set fieldName = field.fieldName %}
{% set fieldType = (field.formType is defined and field.formType!='objectChoice') ? "'"~field.formType~"'": 'null' %}
{% set fieldComent = '/*' ~ field.type ~ '*/' %}
{% set format = "->add(%s %s %s)\n" %}
            {{ format|format("'"~fieldName~"',", fieldType, fieldComent)}}
        {%- endfor %}
        ;

        /*
        $builder->addEventListener(Form\FormEvents::SUBMIT,
            function (Form\FormEvent $event)  {
            }
        );
        */
    }

    /**
     * @param OptionsResolverInterface $resolver
     */
    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults([
            'data_class'         => '{{ core_bundle_ns }}\Entity\{{ entity }}',
            'label'              => '{{ form_label }}',
            'translation_domain' => '{{ entity }}',
        ]);
    }

    /**
     * @return string
     */
    public function getName()
    {
        return 'type_entity_{{ entity_name }}';
    }
}
