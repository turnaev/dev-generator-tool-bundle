<?php

namespace App\CoreBundle\Form\Type;

use Symfony\Component\OptionsResolver\OptionsResolverInterface;
use Symfony\Component\Form;
use {{ core_bundle_ns}}\Entity;

abstract class {{ form_class }} extends Form\AbstractType
{
    /**
     * @param Form\FormBuilderInterface $builder
     * @param array                $options
     */
    public function buildForm(Form\FormBuilderInterface $builder, array $options)
    {
        /* @var Entity\{{ entity }} $entity */
        // $entity = $builder->getData();

        $builder{{ "\n" }}{%- for field in fields %}
{% set fieldName = field.fieldName %}
{% set fieldType = (field.formType is defined and field.formType!='objectChoice') ? "'"~field.formType~"'": 'null' %}
{% set fieldComent = '/* ' ~ field.type|replace({'App\\CoreBundle\\':'@var '}) ~ ' */' %}
{% set format = "->add(%s %s %s)\n" %}
            {{ format|format("'"~fieldName~"',", fieldType, fieldComent)}}
        {%- endfor %}
        ;
    }

    /**
     * @param OptionsResolverInterface $resolver
     */
    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults([
            'data_class'         => '{{ core_bundle_ns }}\Entity\{{ entity }}',
            'label'              => '{{ form_label }}',
            'translation_domain' => '{{ entity }}',
        ]);
    }

    /**
     * @return string
     */
    public function getName()
    {
        return 'type_entity_{{ entity_name }}';
    }
}
